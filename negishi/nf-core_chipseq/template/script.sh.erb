#!/usr/bin/env bash

# Clean the environment
module purge

# Go to workding directory
workdir=<%= context.workdir %>

if [ ! -d "$workdir" ]
then
	echo "$workdir does not exist."
	mkdir -p $workdir
fi
cd $workdir

# Load the required module
module load nextflow

module list

# Pipeline parameters
version_input="<%= context.version %>"
genome_input="<%= context.genome %>"
fasta_input="<%= context.fasta %>"
gtf_input="<%= context.gtf %>"
gff_input="<%= context.gff %>"
bwa_index_input="<%= context.bwa_index %>"
bowtie2_index_input="<%= context.bowtie2_index %>"
chromap_index_input="<%= context.chromap_index %>"
star_index_input="<%= context.star_index %>"
gene_bed_input="<%= context.gene_bed %>"
macs_gsize_input="<%= context.macs_gsize %>"
blacklist_input="<%= context.blacklist %>"
save_reference_input="<%= context.save_reference %>"
input_input="<%= context.input %>"
fragment_size_input="<%= context.fragment_size %>"
seq_center_input="<%= context.seq_center %>"
read_length_input="<%= context.read_length %>"
workdir_input="<%= context.workdir %>"
outdir_input="<%= context.outdir %>"
skip_trimming_input="<%= context.skip_trimming %>"
clip_r1_input="<%= context.clip_r1 %>"
clip_r2_input="<%= context.clip_r2 %>"
three_prime_clip_r1_input="<%= context.three_prime_clip_r1 %>"
three_prime_clip_r2_input="<%= context.three_prime_clip_r2 %>"
trim_nextseq_input="<%= context.trim_nextseq %>"
save_trimmed_input="<%= context.save_trimmed %>"
aligner_input="<%= context.aligner %>"
keep_dups_input="<%= context.keep_dups %>"
keep_multi_map_input="<%= context.keep_multi_map %>"
bwa_min_score_input="<%= context.bwa_min_score %>"
save_align_intermeds_input="<%= context.save_align_intermeds %>"
save_unaligned_input="<%= context.save_unaligned %>"
narrow_peak_input="<%= context.narrow_peak %>"
broad_cutoff_input="<%= context.broad_cutoff %>"
macs_fdr_input="<%= context.macs_fdr %>"
macs_pvalue_input="<%= context.macs_pvalue %>"
min_reps_consensus_input="<%= context.min_reps_consensus %>"
save_macs_pileup_input="<%= context.save_macs_pileup %>"
skip_peak_qc_input="<%= context.skip_peak_qc %>"
skip_peak_annotation_input="<%= context.skip_peak_annotation %>"
skip_consensus_peaks_input="<%= context.skip_consensus_peaks %>"
skip_fastqc_input="<%= context.skip_fastqc %>"
skip_picard_metrics_input="<%= context.skip_picard_metrics %>"
skip_preseq_input="<%= context.skip_preseq %>"
deseq2_vst_input="<%= context.deseq2_vst %>"
skip_plot_profile_input="<%= context.skip_plot_profile %>"
skip_plot_fingerprint_input="<%= context.skip_plot_fingerprint %>"
skip_spp_input="<%= context.skip_spp %>"
skip_deseq2_qc_input="<%= context.skip_deseq2_qc %>"
skip_igv_input="<%= context.skip_igv %>"
skip_multiqc_input="<%= context.skip_multiqc %>"
skip_qc_input="<%= context.skip_qc %>"
resume_input="<%= context.resume %>"
extra_parameters_input="<%= context.extra_parameters %>"



